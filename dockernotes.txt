sudo docker info # current docker status locally
###################

# build:  sudo docker build -t nginx1 .
# run: sudo docker run -p 9191:80 -d nginx1 
# ps: sudo docker ps
# ssh: sudo docker exec -u root -it 794ac646ac1d /bin/bash


# clean
sudo docker system prune -a
sudo docker containers prune 


sudo docker pull agioskatastrof/agioskatastrof:web1


# push image to dcr
joe@abigail:~/dev/containers$ aws ecr describe-repositories  | grep repo ||                                  repositories                                  ||
||  repositoryArn      |  arn:aws:ecr:us-east-1:808460654249:repository/joe-repo  ||
||  repositoryName     |  joe-repo                                                ||
||  repositoryUri      |  808460654249.dkr.ecr.us-east-1.amazonaws.com/joe-repo   ||
https://docs.aws.amazon.com/AmazonECR/latest/userguide/docker-push-ecr-image.html

# 
1. create cluster
https://us-east-1.console.aws.amazon.com/ecs/home?region=us-east-1#/clusters

2. create task
https://us-east-1.console.aws.amazon.com/ecs/home?region=us-east-1#/taskDefinitions/create

3. create service
https://us-east-1.console.aws.amazon.com/ecs/home?region=us-east-1#/clusters/joe-ecs-cluster/createService
# test run
sudo nginx -c /home/joe/dev/containers/service/nginx.conf -t

# actual run
sudo nginx -c /home/joe/dev/containers/service/nginx.conf 

# stop
nginx -s stop
# good link
https://www.docker.com/blog/tips-for-deploying-nginx-official-image-with-docker/

or for tagging for repo
sudo docker build -t agioskatastrof/agioskatastrof:web1 .

no need to rebuild to tag
sudo docker tag web:latest agioskatastrof/agioskatastrof:web2


# clean
sudo docker system prune -a
sudo docker containers prune 


sudo docker pull agioskatastrof/agioskatastrof:web1


# push image to dcr
joe@abigail:~/dev/containers$ aws ecr describe-repositories  | grep repo
||                                  repositories                                  ||
||  repositoryArn      |  arn:aws:ecr:us-east-1:808460654249:repository/joe-repo  ||
||  repositoryName     |  joe-repo                                                ||
||  repositoryUri      |  808460654249.dkr.ecr.us-east-1.amazonaws.com/joe-repo   ||
https://docs.aws.amazon.com/AmazonECR/latest/userguide/docker-push-ecr-image.html

# 
1. create cluster
https://us-east-1.console.aws.amazon.com/ecs/home?region=us-east-1#/clusters

2. create task
https://us-east-1.console.aws.amazon.com/ecs/home?region=us-east-1#/taskDefinitions/create

3. create service
https://us-east-1.console.aws.amazon.com/ecs/home?region=us-east-1#/clusters/joe-ecs-cluster/createService
# test run
sudo nginx -c /home/joe/dev/containers/service/nginx.conf -t

# actual run
sudo nginx -c /home/joe/dev/containers/service/nginx.conf 

# stop
nginx -s stop

# start with options
sudo nginx  -c /home/joe/dev/containers/service/nginx.conf -g "pid /tmp/nginx.pid; worker_processes 2;"


